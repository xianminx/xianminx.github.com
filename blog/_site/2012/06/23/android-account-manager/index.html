<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:wb="http://open.weibo.com/wb">
<head>
<title>Lucas Xu : Android Account Manager </title>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<meta name="language" content="en" />
<link rel="stylesheet" type="text/css" href="/css/default.css" />
<link rel="stylesheet" type="text/css" href="/css/syntax.css" />
<meta property="wb:webmaster" content="85ada6b02f0f02d5" />
<script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js?appkey=4064321344" type="text/javascript" charset="utf-8"></script>

<!-- Google Analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32905076-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>














<body>
<div class="page_margins">
  <div id="header">
    <h2><a href="http://xianminx.github.com">Lucas Xu   徐仙明</a></h2>
    <div class="clear"></div>

    <!-- begin: main navigation #nav -->
    <div id="nav">
      <div class="hlist">
        <ul>
          
          <li>
          <a href="/about/">About</a>
          </li>
          
          <li class="active">
          <a href="/">Blog</a>
          </li>
          
          <li>
          <a href="/archives/">Archives</a>
          </li>
          
          <li>
          <a href="/tags/">Categories</a>
          </li>
          
          <li>
          <a href="/other/">Other</a>
          </li>
          
          <li><a href="http://github.com/xianminx">Repositories</a></li>
        </ul>
      </div>
    </div>
    <!-- end: main navigation -->
  </div>

  <!-- begin: main content area #main -->
  <div id="main">
    <div id="col1">
      <div id="col1_content">
        <div class="post">
  <h3>Android Account Manager</h3>


<!-- JiaThis Button BEGIN -->
<div id="ckepop">
  <span class="jiathis_txt">分享到：</span>
	<a class="jiathis_button_tsina">新浪微博</a>
	<a class="jiathis_button_googleplus">Google+</a>
	<a class="jiathis_button_fb">Facebook</a>
	<a class="jiathis_button_evernote">EverNote</a>
	<a class="jiathis_button_tqq">腾讯微博</a>
	<a href="http://www.jiathis.com/share?uid=1633146" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
	<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript">var jiathis_config = {data_track_clickback:true};</script>
<script type="text/javascript" src="http://v3.jiathis.com/code_mini/jia.js?uid=1336370704363698" charset="utf-8"></script>
<!-- JiaThis Button END -->
<!-- UJian Button BEGIN -->
	<script type="text/javascript" src="http://v1.ujian.cc/code/ujian.js?type=slide"></script>
<!-- UJian Button END -->

<script type="text/javascript">
var jiathis_config = {
    shareImg:{
        "showType":"ALL",
        "bgColor":"",
        "txtColor":"",
        "text":"",
        "services":"",
        "position":"",
        "imgwidth":"",
        "imgheight":"",
        "divname":""
    }
}
</script>
<script type='text/javascript' src='http://v2.jiathis.com/code/jia.js?uid=1336370704363698' charset='utf-8'></script>



<br/>

  <p>Android系统本身提供了多用户账户的支持。 这里的多用户账户不是指操作系统中的用户，而是不同网络服务的账户， 如Google账户， Facebook账户， Twitter账户等。</p>

<p>对于android操作系统来讲，本身就是Linux系统，是一个支持多用户的系统。 每一个应用对应于一个process，运行时会有一个独立的UID， 也就对应于Linux中的用户。 开发者可以在adb下使用 <code>ps</code> 命令来查看。
如下，左边第一列就是运行对应应用的用户名. 可以看到， 对于安装的应用而言，每个应用都有自己独立的UID， 如<code>com.baidu.input</code>的UID为<code>app_67</code></p>
<div class="highlight"><pre><code class="java"><span class="n">root</span>      <span class="mi">117</span>   <span class="mi">2</span>     <span class="mi">0</span>      <span class="mi">0</span>     <span class="n">c01839a4</span> <span class="mi">00000000</span> <span class="n">S</span> <span class="n">ext4</span><span class="o">-</span><span class="n">dio</span><span class="o">-</span><span class="n">unwrit</span>
<span class="n">system</span>    <span class="mi">133</span>   <span class="mi">1</span>     <span class="mi">17020</span>  <span class="mi">4296</span>  <span class="n">c052d258</span> <span class="mi">400307</span><span class="n">b0</span> <span class="n">S</span> <span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">servicemanager</span>
<span class="n">root</span>      <span class="mi">134</span>   <span class="mi">1</span>     <span class="mi">6040</span>   <span class="mi">996</span>   <span class="n">ffffffff</span> <span class="n">ffff0520</span> <span class="n">S</span> <span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">vold</span>
<span class="n">system</span>    <span class="mi">138</span>   <span class="mi">1</span>     <span class="mi">64424</span>  <span class="mi">11408</span> <span class="n">ffffffff</span> <span class="mi">400</span><span class="n">c17b0</span> <span class="n">S</span> <span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">surfaceflinger</span>
<span class="n">root</span>      <span class="mi">139</span>   <span class="mi">1</span>     <span class="mi">445988</span> <span class="mi">40160</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">d8d4</span> <span class="n">S</span> <span class="n">zygote</span>
<span class="n">drm</span>       <span class="mi">140</span>   <span class="mi">1</span>     <span class="mi">18912</span>  <span class="mi">4340</span>  <span class="n">ffffffff</span> <span class="mi">400507</span><span class="n">b0</span> <span class="n">S</span> <span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">drmserver</span>
<span class="n">media</span>     <span class="mi">141</span>   <span class="mi">1</span>     <span class="mi">49032</span>  <span class="mi">8836</span>  <span class="n">ffffffff</span> <span class="mi">400207</span><span class="n">b0</span> <span class="n">S</span> <span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">mediaserver</span>
<span class="n">bluetooth</span> <span class="mi">142</span>   <span class="mi">1</span>     <span class="mi">1368</span>   <span class="mi">820</span>   <span class="n">c01fad68</span> <span class="n">ffff0520</span> <span class="n">S</span> <span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">dbus</span><span class="o">-</span><span class="n">daemon</span>
<span class="n">root</span>      <span class="mi">143</span>   <span class="mi">1</span>     <span class="mi">5692</span>   <span class="mi">992</span>   <span class="n">ffffffff</span> <span class="mi">400</span><span class="n">ac578</span> <span class="n">S</span> <span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">installd</span>
<span class="n">keystore</span>  <span class="mi">144</span>   <span class="mi">1</span>     <span class="mi">1764</span>   <span class="mi">564</span>   <span class="n">c05797b8</span> <span class="mi">4004</span><span class="n">f0b8</span> <span class="n">S</span> <span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">keystore</span>
<span class="n">system</span>    <span class="mi">146</span>   <span class="mi">1</span>     <span class="mi">18832</span>  <span class="mi">4248</span>  <span class="n">ffffffff</span> <span class="mi">4007</span><span class="n">b7b0</span> <span class="n">S</span> <span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">fmradioserver</span>
<span class="n">root</span>      <span class="mi">147</span>   <span class="mi">1</span>     <span class="mi">10428</span>  <span class="mi">1312</span>  <span class="n">ffffffff</span> <span class="mi">4006</span><span class="n">f6d4</span> <span class="n">S</span> <span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">thermald</span>
<span class="n">nobody</span>    <span class="mi">164</span>   <span class="mi">1</span>     <span class="mi">7000</span>   <span class="mi">340</span>   <span class="n">ffffffff</span> <span class="mi">400</span><span class="n">be7b0</span> <span class="n">S</span> <span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">rmt_storage</span>
<span class="n">system</span>    <span class="mi">165</span>   <span class="mi">1</span>     <span class="mi">8360</span>   <span class="mi">1292</span>  <span class="n">ffffffff</span> <span class="mi">4005</span><span class="n">f0b8</span> <span class="n">S</span> <span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">time_daemon</span>
<span class="n">root</span>      <span class="mi">166</span>   <span class="mi">1</span>     <span class="mi">4504</span>   <span class="mi">216</span>   <span class="n">ffffffff</span> <span class="mi">0000829</span><span class="n">c</span> <span class="n">S</span> <span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">adbd</span>
<span class="n">radio</span>     <span class="mi">174</span>   <span class="mi">1</span>     <span class="mi">13668</span>  <span class="mi">3444</span>  <span class="n">ffffffff</span> <span class="n">ffff0520</span> <span class="n">S</span> <span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">rild</span>
<span class="n">radio</span>     <span class="mi">176</span>   <span class="mi">1</span>     <span class="mi">10604</span>  <span class="mi">652</span>   <span class="n">ffffffff</span> <span class="mi">400</span><span class="n">ee8d4</span> <span class="n">S</span> <span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">qmuxd</span>
<span class="n">radio</span>     <span class="mi">178</span>   <span class="mi">1</span>     <span class="mi">5688</span>   <span class="mi">932</span>   <span class="n">ffffffff</span> <span class="mi">400</span><span class="n">cb6d4</span> <span class="n">S</span> <span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">netmgrd</span>
<span class="n">root</span>      <span class="mi">249</span>   <span class="mi">2</span>     <span class="mi">0</span>      <span class="mi">0</span>     <span class="n">c01839a4</span> <span class="mi">00000000</span> <span class="n">S</span> <span class="n">rpcrotuer_smd_x</span>
<span class="n">root</span>      <span class="mi">250</span>   <span class="mi">2</span>     <span class="mi">0</span>      <span class="mi">0</span>     <span class="n">c0125c10</span> <span class="mi">00000000</span> <span class="n">S</span> <span class="n">krpcserversd</span>
<span class="n">root</span>      <span class="mi">251</span>   <span class="mi">2</span>     <span class="mi">0</span>      <span class="mi">0</span>     <span class="n">c012462c</span> <span class="mi">00000000</span> <span class="n">D</span> <span class="n">krmt_storagecln</span>
<span class="n">root</span>      <span class="mi">252</span>   <span class="mi">2</span>     <span class="mi">0</span>      <span class="mi">0</span>     <span class="n">c01273c0</span> <span class="mi">00000000</span> <span class="n">D</span> <span class="n">krmt_storagecln</span>
<span class="n">root</span>      <span class="mi">266</span>   <span class="mi">2</span>     <span class="mi">0</span>      <span class="mi">0</span>     <span class="n">c0210144</span> <span class="mi">00000000</span> <span class="n">S</span> <span class="n">flush</span><span class="o">-</span><span class="mi">179</span><span class="o">:</span><span class="mi">0</span>
<span class="n">system</span>    <span class="mi">305</span>   <span class="mi">139</span>   <span class="mi">578160</span> <span class="mi">86556</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">d7b0</span> <span class="n">S</span> <span class="n">system_server</span>
<span class="n">system</span>    <span class="mi">427</span>   <span class="mi">139</span>   <span class="mi">487128</span> <span class="mi">57384</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">systemui</span>
<span class="n">app_67</span>    <span class="mi">496</span>   <span class="mi">139</span>   <span class="mi">463356</span> <span class="mi">44732</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">baidu</span><span class="o">.</span><span class="na">input</span>
<span class="n">radio</span>     <span class="mi">511</span>   <span class="mi">139</span>   <span class="mi">511076</span> <span class="mi">68580</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">phone</span>
<span class="n">app_22</span>    <span class="mi">520</span>   <span class="mi">139</span>   <span class="mi">469480</span> <span class="mi">47564</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">lbe</span><span class="o">.</span><span class="na">security</span><span class="o">.</span><span class="na">miui</span>
<span class="n">app_29</span>    <span class="mi">536</span>   <span class="mi">139</span>   <span class="mi">480532</span> <span class="mi">82768</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">miui</span><span class="o">.</span><span class="na">home</span>
<span class="n">app_67</span>    <span class="mi">568</span>   <span class="mi">496</span>   <span class="mi">1320</span>   <span class="mi">924</span>   <span class="n">c01f1f28</span> <span class="mi">40090594</span> <span class="n">S</span> <span class="n">logcat</span>
<span class="n">app_47</span>    <span class="mi">593</span>   <span class="mi">139</span>   <span class="mi">453256</span> <span class="mi">32464</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">smspush</span>
<span class="n">app_0</span>     <span class="mi">605</span>   <span class="mi">139</span>   <span class="mi">508268</span> <span class="mi">62564</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">android</span><span class="o">.</span><span class="na">process</span><span class="o">.</span><span class="na">acore</span>
<span class="n">app_10</span>    <span class="mi">622</span>   <span class="mi">139</span>   <span class="mi">515376</span> <span class="mi">49132</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">google</span><span class="o">.</span><span class="na">process</span><span class="o">.</span><span class="na">gapps</span>
<span class="n">root</span>      <span class="mi">732</span>   <span class="mi">1</span>     <span class="mi">5252</span>   <span class="mi">516</span>   <span class="n">ffffffff</span> <span class="mi">400</span><span class="n">f56d4</span> <span class="n">S</span> <span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">mpdecision</span>
<span class="n">app_82</span>    <span class="mi">1272</span>  <span class="mi">1</span>     <span class="mi">1156</span>   <span class="mi">764</span>   <span class="n">c01fad68</span> <span class="mi">400758</span><span class="n">d4</span> <span class="n">S</span> <span class="n">logcat</span>
<span class="n">app_72</span>    <span class="mi">1552</span>  <span class="mi">139</span>   <span class="mi">469184</span> <span class="mi">33464</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">oasistudio</span><span class="o">.</span><span class="na">tk</span>
<span class="n">app_82</span>    <span class="mi">6993</span>  <span class="mi">139</span>   <span class="mi">473684</span> <span class="mi">37396</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">cn</span><span class="o">.</span><span class="na">lookoo</span><span class="o">.</span><span class="na">tuangou</span>
<span class="n">app_82</span>    <span class="mi">7006</span>  <span class="mi">6993</span>  <span class="mi">1024</span>   <span class="mi">632</span>   <span class="n">c01fad68</span> <span class="mi">400</span><span class="n">ef8d4</span> <span class="n">S</span> <span class="n">logcat</span>
<span class="n">root</span>      <span class="mi">18719</span> <span class="mi">2</span>     <span class="mi">0</span>      <span class="mi">0</span>     <span class="n">c0121ccc</span> <span class="mi">00000000</span> <span class="n">D</span> <span class="n">kworker</span><span class="o">/</span><span class="nl">u:</span><span class="mi">3</span>
<span class="n">root</span>      <span class="mi">19261</span> <span class="mi">2</span>     <span class="mi">0</span>      <span class="mi">0</span>     <span class="n">c018dd14</span> <span class="mi">00000000</span> <span class="n">S</span> <span class="n">iscan_sysioc</span>
<span class="n">root</span>      <span class="mi">19262</span> <span class="mi">2</span>     <span class="mi">0</span>      <span class="mi">0</span>     <span class="n">c018dd14</span> <span class="mi">00000000</span> <span class="n">S</span> <span class="n">dhcp_sysioc</span>
<span class="n">root</span>      <span class="mi">19263</span> <span class="mi">2</span>     <span class="mi">0</span>      <span class="mi">0</span>     <span class="n">c018dd14</span> <span class="mi">00000000</span> <span class="n">S</span> <span class="n">dhd_watchdog</span>
<span class="n">root</span>      <span class="mi">19264</span> <span class="mi">2</span>     <span class="mi">0</span>      <span class="mi">0</span>     <span class="n">c018dd14</span> <span class="mi">00000000</span> <span class="n">S</span> <span class="n">dhd_dpc</span>
<span class="n">root</span>      <span class="mi">19265</span> <span class="mi">2</span>     <span class="mi">0</span>      <span class="mi">0</span>     <span class="n">c018dd14</span> <span class="mi">00000000</span> <span class="n">S</span> <span class="n">dhd_sysioc</span>
<span class="n">log</span>       <span class="mi">19266</span> <span class="mi">1</span>     <span class="mi">716</span>    <span class="mi">292</span>   <span class="n">c03a6b1c</span> <span class="mi">4002</span><span class="n">b578</span> <span class="n">S</span> <span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">logwrapper</span>
<span class="n">wifi</span>      <span class="mi">19268</span> <span class="mi">19266</span> <span class="mi">2468</span>   <span class="mi">1252</span>  <span class="n">c01fad68</span> <span class="mi">400</span><span class="n">f28d4</span> <span class="n">S</span> <span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">wpa_supplicant</span>
<span class="n">app_87</span>    <span class="mi">19394</span> <span class="mi">139</span>   <span class="mi">461244</span> <span class="mi">38592</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">box</span><span class="o">.</span><span class="na">brian</span><span class="o">.</span><span class="na">activity</span>
<span class="n">root</span>      <span class="mi">21861</span> <span class="mi">2</span>     <span class="mi">0</span>      <span class="mi">0</span>     <span class="n">c0181c44</span> <span class="mi">00000000</span> <span class="n">S</span> <span class="n">kworker</span><span class="o">/</span><span class="nl">u:</span><span class="mi">1</span>
<span class="n">app_99</span>    <span class="mi">22996</span> <span class="mi">139</span>   <span class="mi">494164</span> <span class="mi">35896</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">renren</span><span class="o">.</span><span class="na">mobile</span><span class="o">.</span><span class="na">chat</span><span class="o">:</span><span class="n">sixinpush</span>
<span class="n">root</span>      <span class="mi">23578</span> <span class="mi">2</span>     <span class="mi">0</span>      <span class="mi">0</span>     <span class="n">c0210144</span> <span class="mi">00000000</span> <span class="n">S</span> <span class="n">flush</span><span class="o">-</span><span class="mi">179</span><span class="o">:</span><span class="mi">96</span>
<span class="n">app_96</span>    <span class="mi">23724</span> <span class="mi">139</span>   <span class="mi">454356</span> <span class="mi">33508</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">mbook</span><span class="o">.</span><span class="na">itaoshu</span>
<span class="n">app_88</span>    <span class="mi">23830</span> <span class="mi">139</span>   <span class="mi">477360</span> <span class="mi">52496</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">wandoujia</span><span class="o">.</span><span class="na">phoenix2</span>
<span class="n">dhcp</span>      <span class="mi">25092</span> <span class="mi">1</span>     <span class="mi">952</span>    <span class="mi">468</span>   <span class="n">c01fad68</span> <span class="n">ffff0520</span> <span class="n">S</span> <span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">dhcpcd</span>
<span class="n">root</span>      <span class="mi">25559</span> <span class="mi">1</span>     <span class="mi">9648</span>   <span class="mi">1412</span>  <span class="n">ffffffff</span> <span class="n">ffff0520</span> <span class="n">S</span> <span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">netd</span>
<span class="n">root</span>      <span class="mi">26702</span> <span class="mi">1</span>     <span class="mi">728</span>    <span class="mi">292</span>   <span class="n">c05797b8</span> <span class="mi">4008</span><span class="n">c0b8</span> <span class="n">S</span> <span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">debuggerd</span>
<span class="n">app_26</span>    <span class="mi">27385</span> <span class="mi">139</span>   <span class="mi">470492</span> <span class="mi">40448</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">google</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">apps</span><span class="o">.</span><span class="na">maps</span><span class="o">:</span><span class="n">NetworkLocationService</span>
<span class="n">app_43</span>    <span class="mi">28373</span> <span class="mi">139</span>   <span class="mi">476148</span> <span class="mi">41240</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">vending</span>
<span class="n">app_91</span>    <span class="mi">28402</span> <span class="mi">139</span>   <span class="mi">463464</span> <span class="mi">36712</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">renren</span><span class="o">.</span><span class="na">mobile</span><span class="o">.</span><span class="na">android</span>
<span class="n">app_0</span>     <span class="mi">28696</span> <span class="mi">139</span>   <span class="mi">456256</span> <span class="mi">33980</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">contacts</span>
<span class="n">app_18</span>    <span class="mi">28726</span> <span class="mi">139</span>   <span class="mi">500412</span> <span class="mi">61412</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">google</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">gm</span>
<span class="n">app_93</span>    <span class="mi">28801</span> <span class="mi">139</span>   <span class="mi">453896</span> <span class="mi">31740</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">fractalist</span><span class="o">.</span><span class="na">MobileAcceleration</span>
<span class="n">app_38</span>    <span class="mi">28814</span> <span class="mi">139</span>   <span class="mi">454696</span> <span class="mi">32664</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">quicksearchbox</span>
<span class="n">app_10</span>    <span class="mi">28829</span> <span class="mi">139</span>   <span class="mi">458112</span> <span class="mi">35592</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">google</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">gsf</span><span class="o">.</span><span class="na">login</span>
<span class="n">root</span>      <span class="mi">28885</span> <span class="mi">2</span>     <span class="mi">0</span>      <span class="mi">0</span>     <span class="n">c0181c44</span> <span class="mi">00000000</span> <span class="n">S</span> <span class="n">kworker</span><span class="o">/</span><span class="mi">0</span><span class="o">:</span><span class="mi">1</span>
<span class="n">app_49</span>    <span class="mi">28886</span> <span class="mi">139</span>   <span class="mi">470840</span> <span class="mi">41624</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">xiaomi</span><span class="o">.</span><span class="na">channel</span>
<span class="n">root</span>      <span class="mi">28931</span> <span class="mi">2</span>     <span class="mi">0</span>      <span class="mi">0</span>     <span class="n">c0181c44</span> <span class="mi">00000000</span> <span class="n">S</span> <span class="n">kworker</span><span class="o">/</span><span class="nl">u:</span><span class="mi">0</span>
<span class="n">root</span>      <span class="mi">28939</span> <span class="mi">2</span>     <span class="mi">0</span>      <span class="mi">0</span>     <span class="n">c0181c44</span> <span class="mi">00000000</span> <span class="n">S</span> <span class="n">kworker</span><span class="o">/</span><span class="mi">0</span><span class="o">:</span><span class="mi">0</span>
<span class="n">app_48</span>    <span class="mi">28987</span> <span class="mi">139</span>   <span class="mi">453272</span> <span class="mi">31420</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">qualcomm</span><span class="o">.</span><span class="na">wiper</span>
<span class="n">app_60</span>    <span class="mi">28999</span> <span class="mi">139</span>   <span class="mi">454104</span> <span class="mi">33892</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">glorymob</span><span class="o">.</span><span class="na">joymax</span><span class="o">.</span><span class="na">view</span>
<span class="n">root</span>      <span class="mi">29103</span> <span class="mi">2</span>     <span class="mi">0</span>      <span class="mi">0</span>     <span class="n">c0181c44</span> <span class="mi">00000000</span> <span class="n">S</span> <span class="n">kworker</span><span class="o">/</span><span class="nl">u:</span><span class="mi">4</span>
<span class="n">app_30</span>    <span class="mi">29142</span> <span class="mi">139</span>   <span class="mi">459356</span> <span class="mi">40064</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">mms</span>
<span class="n">system</span>    <span class="mi">29168</span> <span class="mi">139</span>   <span class="mi">477500</span> <span class="mi">49812</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">settings</span>
<span class="n">app_15</span>    <span class="mi">29212</span> <span class="mi">139</span>   <span class="mi">477548</span> <span class="mi">46216</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">email</span>
<span class="n">app_16</span>    <span class="mi">29232</span> <span class="mi">139</span>   <span class="mi">460760</span> <span class="mi">32804</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">exchange</span>
<span class="n">root</span>      <span class="mi">29323</span> <span class="mi">2</span>     <span class="mi">0</span>      <span class="mi">0</span>     <span class="n">c0181c44</span> <span class="mi">00000000</span> <span class="n">S</span> <span class="n">kworker</span><span class="o">/</span><span class="mi">0</span><span class="o">:</span><span class="mi">2</span>
<span class="n">root</span>      <span class="mi">29324</span> <span class="mi">2</span>     <span class="mi">0</span>      <span class="mi">0</span>     <span class="n">c0181c44</span> <span class="mi">00000000</span> <span class="n">S</span> <span class="n">kworker</span><span class="o">/</span><span class="mi">0</span><span class="o">:</span><span class="mi">3</span>
<span class="n">app_26</span>    <span class="mi">29345</span> <span class="mi">139</span>   <span class="mi">460068</span> <span class="mi">36716</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">com</span><span class="o">.</span><span class="na">google</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">apps</span><span class="o">.</span><span class="na">maps</span>
<span class="n">app_14</span>    <span class="mi">29386</span> <span class="mi">139</span>   <span class="mi">454912</span> <span class="mi">34484</span> <span class="n">ffffffff</span> <span class="mi">4008</span><span class="n">e4c4</span> <span class="n">S</span> <span class="n">android</span><span class="o">.</span><span class="na">process</span><span class="o">.</span><span class="na">media</span>
<span class="n">root</span>      <span class="mi">29439</span> <span class="mi">166</span>   <span class="mi">804</span>    <span class="mi">432</span>   <span class="n">c01090a8</span> <span class="mi">400</span><span class="n">d6f94</span> <span class="n">S</span> <span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">sh</span>
<span class="n">root</span>      <span class="mi">29444</span> <span class="mi">29439</span> <span class="mi">980</span>    <span class="mi">364</span>   <span class="mi">00000000</span> <span class="mi">400</span><span class="n">ed578</span> <span class="n">R</span> <span class="n">ps</span>
</code></pre>
</div>

<p>由于Android系统是为互联网而设计的，自然需要对各种网络服务有很好的支持。 Android的解决方案是提供<a href="http://developer.android.com/reference/android/accounts/AccountManager.html">AccountManager</a>来管理不同服务的账户。 <a href="http://developer.android.com/reference/android/accounts/AccountManager.html">AccountManager</a>是由系统提供的服务([AccountManagerService])， 从而很好的在系统层面解决不同应用共享服务账户的问题。 </p>

<p>比如， 用户注册了Google账户，使用这个账户可以登陆Google+,Google Play, Gmail, 也可以同步联系人甚至手机上的其他设置如WI-FI密码和浏览器书签到Google的服务器上。 由于这些服务是由不同的应用提供的，如果账户由每个应用自己单独处理，将是一件很繁琐的事情。 甚至处理不好， 会带来很大的安全隐患。 现在好了，Android在系统级别提供了账户管理功能， 用户只要去账户管理中心登陆账户， 不同应用就可以想账户管理中心请求账户访问权限，而不需要应用本身去维护和管理这些账户，对应用开发来说既简单又安全了。</p>

<h2 id="toc_5">Android Account 管理类库介绍</h2>

<p>Android中和账户相关的API都在<a href="http://developer.android.com/reference/android/accounts/package-summary.html">android.accounts</a>包下。 </p>

<p>重要的接口和类有：</p>

<h3 id="toc_6">Interfaces</h3>

<ul>
<li><code>AccountManagerCallback&lt;V&gt;</code> 包含回调函数。 类似于我们经常写的Listener<br></li>
<li><code>AccountManagerFuture&lt;V&gt;</code> 异步调用<code>AccountManager</code>的结果。</li>
<li><code>OnAccountsUpdateListener</code> AccountMonitor用到的回调接口。 </li>
</ul>

<h3 id="toc_7">Classes</h3>

<ul>
<li>AbstractAccountAuthenticator 如果开发者需要实现自己的认证方式， 可以通过继承这个类来实现 </li>
<li>Account 表示我们的账户</li>
<li>AccountAuthenticatorActivity  Base class for implementing an Activity that is used to help implement an AbstractAccountAuthenticator. </li>
<li>AccountAuthenticatorResponse  Object used to communicate responses back to the AccountManager<br></li>
<li>AccountManager    账户管理的核心类,是访问账户的入口。 </li>
<li>AuthenticatorDescription  A Parcelable value type that contains information about an account authenticator. </li>
</ul>

<h2 id="toc_8">使用[AccountManager]访问已经支持的账户</h2>

<p>Android 系统默认支持Google账户， Microsoft Exchange账户，和普通邮件账户。  </p>

<p>现在，假如你开发了一个应用,会使用到用户的Google账户， 比如， 类似于<a href="https://play.google.com/store/apps/details?id=com.zegoggles.smssync&amp;hl=en">SMS Backup</a>这种应用， 可以把手机端的短信同步到GMail邮箱当中。 当然你不希望已经在自己手机上登陆过Gmail账户的用户再次在你的应用中输入用户名和密码，用户也很害怕把密码告诉你。这种情况下， 你可以请求用户授予你访问他的账户的权利， 如同下图所示： 
，用户也很害怕把密码告诉你。这种情况下， 你可以请求用户授予你访问他的账户的权利， 如同下图所示： 
<img src="/graphics/ae6d0505e0138e239f8e7715fddf57ac.png" alt="Request Account Access from SMS Backup" title="Reqeust Account Access Permission"></p>

<p>将如何实现呢？</p>

<p>Google 提供了一个很好的例子， 在Google Task API 下。 <a href="link"></a>
简单的使用如下： </p>
<div class="highlight"><pre><code class="java">    <span class="n">mAccountManager</span> <span class="o">=</span> <span class="n">AccountManager</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>

        <span class="n">Account</span><span class="o">[]</span> <span class="n">accounts</span> <span class="o">=</span> <span class="n">mAccountManager</span><span class="o">.</span><span class="na">getAccounts</span><span class="o">();</span>
        <span class="k">for</span><span class="o">(</span><span class="n">Account</span> <span class="n">account</span> <span class="o">:</span> <span class="n">accounts</span><span class="o">){</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;account.name={0}, type={1}, content={2}&quot;</span><span class="o">,</span><span class="n">account</span><span class="o">.</span><span class="na">name</span><span class="o">,</span> <span class="n">account</span><span class="o">.</span><span class="na">type</span><span class="o">,</span> <span class="n">account</span><span class="o">.</span><span class="na">describeContents</span><span class="o">()));</span>
        <span class="o">}</span>
</code></pre>
</div>

<h2 id="toc_9">扩展[AccountManager]支持自定义的账户</h2>

<p>既然系统的AccountManager提供了这么多的便利， 你开始考虑把自己的在线服务加到Android系统中去了， 比如你有类似人人或者新浪微博， 想要把账户管理加到系统中去， 该怎么做呢？</p>

</div>

<small class="meta final">
  23 Jun 2012
  
   | 
  <a href='/tags#android'>android</a>
  

</small>
<!-- 新浪微薄 评论箱 -->
<script type="text/javascript">
(function(){
var url = "http://widget.weibo.com/distribution/comments.php?width=0&url=auto&ralateuid=2063991842&appkey=4064321344&dpc=1";
url = url.replace("url=auto", "url=" + document.URL); 
document.write('<iframe id="WBCommentFrame" src="' + url + '" scrolling="no" frameborder="0" style="width:100%"></iframe>');
})();
</script>
<script src="http://tjs.sjs.sinajs.cn/open/widget/js/widget/comment.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
window.WBComment.init({
    "id": "WBCommentFrame"
});
</script>
<!-- 新浪微薄 评论箱 -->


<!-- Google Analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32905076-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

      </div>
    </div>
    <div id="col3">
      <div id="col3_content">
        <h6 class="vlist">GitHub projects</h6>
        <ul class="vlist">
        	<li>
			<a href="https://github.com/xianminx/PullToRefresh-ListView" >PullToRefresh-ListView</a>
		</li>
	</ul>
        <h6 class="vlist">Misc. Links</h6>
        <ul class="vlist">
          <li>
            <a
              href="http://android-developers.blogspot.com/"
              ><img src="http://android-developers.blogspot.kr/favicon.ico"/>Android Developers Blog</a>
          </li>
          <li>
            <a
              href="http://saigeethamn.blogspot.com/"
              ><img src="https://www.blogger.com/img/logo-16.png"/> Sai Geetha's Android blog</a>
          </li>
          </ul>

<!-- AddThis Follow BEGIN -->
<h6 class="vlist">Follow Me</h6>
<br/>
<div class="addthis_toolbox addthis_32x32_style addthis_default_style">
<a class="addthis_button_google_follow" addthis:userid="101226668323584222394"></a>
<a class="addthis_button_facebook_follow" addthis:userid="xianminx"></a>
<a class="addthis_button_linkedin_follow" addthis:userid="xianminx"></a>
<a class="addthis_button_twitter_follow" addthis:userid="xianminx"></a>
</div>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4fdf49b46dac2571"></script>
<!-- AddThis Follow END -->

<br/>

<iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=1&ptype=1&speed=300&skin=1&isTitle=1&noborder=0&isWeibo=1&isFans=1&uid=2063991842&verifier=e0e8dc08&dpc=1"></iframe>


</div>
    </div>
    <div class="clear"></div>
  </div>
  <!-- end: #main -->

  <!-- begin: #footer -->
  <div id="footer">
    <div class="hlist">
      <ul>
        
        <li>
        <a href="/about/"
        
        >About</a>
         | 
        </li>
        
        <li class="active">
        <a href="/"
        
        >Blog</a>
         | 
        </li>
        
        <li>
        <a href="/archives/"
        
        >Archives</a>
         | 
        </li>
        
        <li>
        <a href="/tags/"
        
        >Categories</a>
         | 
        </li>
        
        <li>
        <a href="/other/"
        
        >Other</a>
        
        </li>
        
        <li>&ndash; updated 2012-06-26</li>
      </ul>
    </div>
  </div>
  <!-- end: #footer -->

</div>

</body>
</html>
