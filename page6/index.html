<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:wb="http://open.weibo.com/wb">
<head>
<title>Lucas Xu : blog, ideas, etc. </title>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<meta name="language" content="en" />
<link rel="stylesheet" type="text/css" href="/css/default.css" />
<link rel="stylesheet" type="text/css" href="/css/syntax.css" />
<meta property="wb:webmaster" content="85ada6b02f0f02d5" />
<script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js?appkey=4064321344" type="text/javascript" charset="utf-8"></script>

<!-- Google Analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32905076-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>














<body>
<div class="page_margins">
  <div id="header">
    <h2><a href="http://xianminx.github.com">Lucas Xu   徐仙明</a></h2>
    <div class="clear"></div>

    <!-- begin: main navigation #nav -->
    <div id="nav">
      <div class="hlist">
        <ul>
          
          <li>
          <a href="/about/">About</a>
          </li>
          
          <li class="active">
          <a href="/">Blog</a>
          </li>
          
          <li>
          <a href="/archives/">Archives</a>
          </li>
          
          <li>
          <a href="/tags/">Categories</a>
          </li>
          
          <li>
          <a href="/other/">Other</a>
          </li>
          
        </ul>
      </div>
    </div>
    <!-- end: main navigation -->
  </div>

  <!-- begin: main content area #main -->
  <div id="main">
    <div id="col1">
      <div id="col1_content">
        
  <h3 class="excerpt"><a href="/2012/07/06/android-get-phone-number/">Android 手机API获取手机号码</a></h3>
  <p class="excerpt">
    之前在网上经常听到开发者传言Android平台中可以通过API接口获取SIM卡的ISDN(MSISDN)号码，即大众所受的手机号码。实际上在Android系统设置里面用户去查看这一项的时候是空白。 说明两个问题：


OS提供API获取这个号码
OSAPI无法从SIM卡中获取到这个号码


也就是说， 这个API的获取结果和SIM卡相关， 即和运营商相关。 

如果使用API可以获取这个号码的话， 对用户隐私将是一个非常大的威胁。

我用下面的代码在移动的动感地带和联通SIM卡上都没有得到手机号码。 松一口气。 


说明暂时在中国移动和中国联通SIM卡上是无法获取这个号码的。


注意， 要在AndroidManifest.xml中添加权限android.permission.READ_PHONE_STATE. 如下： 
 &nbsp;
    <a href="/2012/07/06/android-get-phone-number/" class="read-more">read more</a>
  </p>
  <small class="meta">
    06 Jul 2012
    
     | 
    <a href="/tags#android">android</a>
    
  </small>

  <h3 class="excerpt"><a href="/2012/06/29/android-service-debugging/">How does an Android developer fix a bug?</a></h3>
  <p class="excerpt">
    Day and day ago, I wrote a DownloadingService for Android application. The service is provided in an Android SDK, which ill be utilized by other android apps. Some app developers wrote their code in such as way that when user press BACK button on Android, the app will kill itself in such a way: As an advanced Android developer, you may think how this could be stupid and violate the design principle of Android Framework, i.e., &quot;Activity&quot; should follow it&#39;s own lifecycle. But as the old saying said, customer is our God. SDK users, some could be novice android develoeprs,... &nbsp;
    <a href="/2012/06/29/android-service-debugging/" class="read-more">read more</a>
  </p>
  <small class="meta">
    29 Jun 2012
    
     | 
    <a href="/tags#android">android</a>, 
    
    
    <a href="/tags#debug">debug</a>
    
  </small>

  <h3 class="excerpt"><a href="/2012/06/28/android-test-ui-thread-looper/">Android Test For UI Thread Listeners</a></h3>
  <p class="excerpt">
    The other day I wrote an Android downloading service running in a separate process. The main application process will send command/message to the downloading process asking it to download item. The downloading process is supposed to post back the downloading process and status to the main applicaiton process by sending messages. Everything works fine: the application process can send command and downloading process can receive the command and then start downloading the item. Also the application process can also receives the process update messages from the donwloading process. For the sake of recursive testing, namely, I wrote the following test... &nbsp;
    <a href="/2012/06/28/android-test-ui-thread-looper/" class="read-more">read more</a>
  </p>
  <small class="meta">
    28 Jun 2012
    
     | 
    <a href="/tags#android">android</a>
    
  </small>

  <h3 class="excerpt"><a href="/2012/06/26/android-service-bug/">Android Account Manager</a></h3>
  <p class="excerpt">
    Android系统本身提供了多用户账户的支持。 这里的多用户账户不是指操作系统中的用户，而是不同网络服务的账户， 如Google账户， Facebook账户， Twitter账户等。 对于android操作系统来讲，本身就是Linux系统，是一个支持多用户的系统。 每一个应用对应于一个process，运行时会有一个独立的UID， 也就对应于Linux中的用户。 开发者可以在adb下使用 ps 命令来查看。 如下，左边第一列就是运行对应应用的用户名. 可以看到， 对于安装的应用而言，每个应用都有自己独立的UID， 如com.baidu.input的UID为app_67 由于Android系统是为互联网而设计的，自然需要对各种网络服务有很好的支持。 Android的解决方案是提供AccountManager来管理不同服务的账户。 AccountManager是由系统提供的服务([AccountManagerService])， 从而很好的在系统层面解决不同应用共享服务账户的问题。 比如， 用户注册了Google账户，使用这个账户可以登陆Google+,Google Play, Gmail, 也可以同步联系人甚至手机上的其他设置如WI-FI密码和浏览器书签到Google的服务器上。 由于这些服务是由不同的应用提供的，如果账户由每个应用自己单独处理，将是一件很繁琐的事情。 甚至处理不好， 会带来很大的安全隐患。 现在好了，Android在系统级别提供了账户管理功能， 用户只要去账户管理中心登陆账户， 不同应用就可以想账户管理中心请求账户访问权限，而不需要应用本身去维护和管理这些账户，对应用开发来说既简单又安全了。 Android Account 管理类库介绍 Android中和账户相关的API都在android.accounts包下。 重要的接口和类有： Interfaces AccountManagerCallback&lt;V&gt; 包含回调函数。 类似于我们经常写的Listener AccountManagerFuture&lt;V&gt; 异步调用AccountManager的结果。 OnAccountsUpdateListener AccountMonitor用到的回调接口。 Classes AbstractAccountAuthenticator 如果开发者需要实现自己的认证方式， 可以通过继承这个类来实现 Account 表示我们的账户 AccountAuthenticatorActivity Base class for implementing an Activity that is used to help implement an AbstractAccountAuthenticator. AccountAuthenticatorResponse Object used to communicate responses back to the AccountManager AccountManager 账户管理的核心类,是访问账户的入口。 AuthenticatorDescription A Parcelable value type that contains information about an account authenticator. 使用[AccountManager]访问已经支持的账户 Android 系统默认支持Google账户， Microsoft Exchange账户，和普通邮件账户。 现在，假如你开发了一个应用,会使用到用户的Google账户， 比如， 类似于SMS Backup这种应用， 可以把手机端的短信同步到GMail邮箱当中。 当然你不希望已经在自己手机上登陆过Gmail账户的用户再次在你的应用中输入用户名和密码，用户也很害怕把密码告诉你。这种情况下， 你可以请求用户授予你访问他的账户的权利，... &nbsp;
    <a href="/2012/06/26/android-service-bug/" class="read-more">read more</a>
  </p>
  <small class="meta">
    26 Jun 2012
    
     | 
    <a href="/tags#android">android</a>
    
  </small>

  <h3 class="excerpt"><a href="/2012/06/26/android-emulator-acceleration/">Android Account Manager</a></h3>
  <p class="excerpt">
    Android系统本身提供了多用户账户的支持。 这里的多用户账户不是指操作系统中的用户，而是不同网络服务的账户， 如Google账户， Facebook账户， Twitter账户等。 对于android操作系统来讲，本身就是Linux系统，是一个支持多用户的系统。 每一个应用对应于一个process，运行时会有一个独立的UID， 也就对应于Linux中的用户。 开发者可以在adb下使用 ps 命令来查看。 如下，左边第一列就是运行对应应用的用户名. 可以看到， 对于安装的应用而言，每个应用都有自己独立的UID， 如com.baidu.input的UID为app_67 由于Android系统是为互联网而设计的，自然需要对各种网络服务有很好的支持。 Android的解决方案是提供AccountManager来管理不同服务的账户。 AccountManager是由系统提供的服务([AccountManagerService])， 从而很好的在系统层面解决不同应用共享服务账户的问题。 比如， 用户注册了Google账户，使用这个账户可以登陆Google+,Google Play, Gmail, 也可以同步联系人甚至手机上的其他设置如WI-FI密码和浏览器书签到Google的服务器上。 由于这些服务是由不同的应用提供的，如果账户由每个应用自己单独处理，将是一件很繁琐的事情。 甚至处理不好， 会带来很大的安全隐患。 现在好了，Android在系统级别提供了账户管理功能， 用户只要去账户管理中心登陆账户， 不同应用就可以想账户管理中心请求账户访问权限，而不需要应用本身去维护和管理这些账户，对应用开发来说既简单又安全了。 Android Account 管理类库介绍 Android中和账户相关的API都在android.accounts包下。 重要的接口和类有： Interfaces AccountManagerCallback&lt;V&gt; 包含回调函数。 类似于我们经常写的Listener AccountManagerFuture&lt;V&gt; 异步调用AccountManager的结果。 OnAccountsUpdateListener AccountMonitor用到的回调接口。 Classes AbstractAccountAuthenticator 如果开发者需要实现自己的认证方式， 可以通过继承这个类来实现 Account 表示我们的账户 AccountAuthenticatorActivity Base class for implementing an Activity that is used to help implement an AbstractAccountAuthenticator. AccountAuthenticatorResponse Object used to communicate responses back to the AccountManager AccountManager 账户管理的核心类,是访问账户的入口。 AuthenticatorDescription A Parcelable value type that contains information about an account authenticator. 使用[AccountManager]访问已经支持的账户 Android 系统默认支持Google账户， Microsoft Exchange账户，和普通邮件账户。 现在，假如你开发了一个应用,会使用到用户的Google账户， 比如， 类似于SMS Backup这种应用， 可以把手机端的短信同步到GMail邮箱当中。 当然你不希望已经在自己手机上登陆过Gmail账户的用户再次在你的应用中输入用户名和密码，用户也很害怕把密码告诉你。这种情况下， 你可以请求用户授予你访问他的账户的权利，... &nbsp;
    <a href="/2012/06/26/android-emulator-acceleration/" class="read-more">read more</a>
  </p>
  <small class="meta">
    26 Jun 2012
    
     | 
    <a href="/tags#android">android</a>
    
  </small>


<div class="paging">
  
    <a href="/page7" class="older">Older Posts</a>
  

  
    <a href="/page5" class="newer">Newer Posts</a>
  


  <div class="clear"></div>
</div>

<!-- Google Analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32905076-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

      </div>
    </div>
    <div id="col3">
      <div id="col3_content">
        <h6 class="vlist">GitHub projects</h6>
        <ul class="vlist">
        	<li>
			<a href="https://github.com/xianminx/PullToRefresh-ListView" >PullToRefresh-ListView</a>
		</li>
	</ul>
        <h6 class="vlist">Misc. Links</h6>
        <ul class="vlist">
          <li>
            <a
              href="http://android-developers.blogspot.com/"
              ><img src="http://android-developers.blogspot.kr/favicon.ico"/>Android Developers Blog</a>
          </li>
           <li>
            <a
              href="http://saigeethamn.blogspot.com/"
              ><img src="https://www.blogger.com/img/logo-16.png"/> Sai Geetha's Android blog</a>
          </li>
          <li>
            <a
              href="http://jon.oberheide.org/blog/"
              ><img src="https://encrypted-tbn2.google.com/images?q=tbn:ANd9GcRo9pLd2k2lx_xG3T0uA7DgpZ0Guu9FMWHPLi5cDeVayZ7uNO0X" height="16" width="16"/>JON.OBERHEIDE.ORG</a>
          </li>
          </ul>

<!-- AddThis Follow BEGIN -->
<h6 class="vlist">Follow Me</h6>
<br/>
<div class="addthis_toolbox addthis_32x32_style addthis_default_style">
<a class="addthis_button_google_follow" addthis:userid="101226668323584222394"></a>
<a class="addthis_button_facebook_follow" addthis:userid="xianminx"></a>
<a class="addthis_button_linkedin_follow" addthis:userid="xianminx"></a>
<a class="addthis_button_twitter_follow" addthis:userid="xianminx"></a>
</div>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4fdf49b46dac2571"></script>
<!-- AddThis Follow END -->

<br/>

<iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=1&ptype=1&speed=300&skin=1&isTitle=1&noborder=0&isWeibo=1&isFans=1&uid=2063991842&verifier=e0e8dc08&dpc=1"></iframe>


</div>
    </div>
    <div class="clear"></div>
  </div>
  <!-- end: #main -->

  <!-- begin: #footer -->
  <div id="footer">
    <div class="hlist">
      <ul>
        
        <li>
        <a href="/about/"
        
        >About</a>
         | 
        </li>
        
        <li class="active">
        <a href="/"
        
        >Blog</a>
         | 
        </li>
        
        <li>
        <a href="/archives/"
        
        >Archives</a>
         | 
        </li>
        
        <li>
        <a href="/tags/"
        
        >Categories</a>
         | 
        </li>
        
        <li>
        <a href="/other/"
        
        >Other</a>
        
        </li>
        
        <li>&ndash; updated 2013-02-02</li>
      </ul>
    </div>
  </div>
  <!-- end: #footer -->

</div>

</body>
</html>
