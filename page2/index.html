<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:wb="http://open.weibo.com/wb">
<head>
<title>Lucas Xu : blog, ideas, etc. </title>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<meta name="language" content="en" />
<link rel="stylesheet" type="text/css" href="/css/default.css" />
<link rel="stylesheet" type="text/css" href="/css/syntax.css" />
<meta property="wb:webmaster" content="85ada6b02f0f02d5" />
<script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js?appkey=4064321344" type="text/javascript" charset="utf-8"></script>

<!-- Google Analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32905076-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>














<body>
<div class="page_margins">
  <div id="header">
    <h2><a href="http://xianminx.github.com">Lucas Xu   徐仙明</a></h2>
    <div class="clear"></div>

    <!-- begin: main navigation #nav -->
    <div id="nav">
      <div class="hlist">
        <ul>
          
          <li>
          <a href="/about/">About</a>
          </li>
          
          <li class="active">
          <a href="/">Blog</a>
          </li>
          
          <li>
          <a href="/archives/">Archives</a>
          </li>
          
          <li>
          <a href="/tags/">Categories</a>
          </li>
          
          <li>
          <a href="/other/">Other</a>
          </li>
          
          <li><a href="http://github.com/xianminx">Repositories</a></li>
        </ul>
      </div>
    </div>
    <!-- end: main navigation -->
  </div>

  <!-- begin: main content area #main -->
  <div id="main">
    <div id="col1">
      <div id="col1_content">
        
  <h3 class="excerpt"><a href="/2012/06/23/android-account-manager/">Android Account Manager</a></h3>
  <p class="excerpt">
    Android系统本身提供了多用户账户的支持。 这里的多用户账户不是指操作系统中的用户，而是不同网络服务的账户， 如Google账户， Facebook账户， Twitter账户等。 对于android操作系统来讲，本身就是Linux系统，是一个支持多用户的系统。 每一个应用对应于一个process，运行时会有一个独立的UID， 也就对应于Linux中的用户。 开发者可以在adb下使用 ps 命令来查看。 如下，左边第一列就是运行对应应用的用户名. 可以看到， 对于安装的应用而言，每个应用都有自己独立的UID， 如com.baidu.input的UID为app_67 root 117 2 0 0 c01839a4 00000000 S ext4-dio-unwrit system 133 1 17020 4296 c052d258 400307b0 S /system/bin/servicemanager root 134 1 6040 996 ffffffff ffff0520 S /system/bin/vold system 138 1 64424 11408 ffffffff 400c17b0 S /system/bin/surfaceflinger root 139 1 445988 40160 ffffffff 4008d8d4 S zygote drm 140 1 18912 4340 ffffffff 400507b0 S /system/bin/drmserver media 141 1 49032 8836 ffffffff 400207b0 S /system/bin/mediaserver bluetooth 142 1 1368 820 c01fad68 ffff0520 S /system/bin/dbus-daemon root 143 1 5692 992 ffffffff 400ac578 S /system/bin/installd keystore 144 1 1764... &nbsp;
    <a href="/2012/06/23/android-account-manager/" class="read-more">read more</a>
  </p>
  <small class="meta">
    23 Jun 2012
    
     | 
    <a href="/tags#android">android</a>
    
  </small>

  <h3 class="excerpt"><a href="/2012/06/22/android-content-provider/">Android Content Provider</a></h3>
  <p class="excerpt">
    Lucas Xu ContactProvider Table ContactsContract.RawContacts | Column Name | example |description | |:-----------|:-----------|:------------:| |long _ID ||Row ID. Sync adapters should try to preserve row IDs during updates. In other words, it is much better for a sync adapter to update a raw contact rather than to delete and re-insert it. |CONTACT_ID || read-only The ID of the row in the ContactsContract.Contacts table that this raw contact belongs to. Raw contacts are linked to contacts by the aggregation process, which can be controlled by the AGGREGATION_MODE field and ContactsContract.AggregationExceptions. int AGGREGATION_MODE read/write A mechanism that allows programmatic control of the aggregation... &nbsp;
    <a href="/2012/06/22/android-content-provider/" class="read-more">read more</a>
  </p>
  <small class="meta">
    22 Jun 2012
    
     | 
    <a href="/tags#java">java</a>
    
  </small>

  <h3 class="excerpt"><a href="/2012/06/21/oauth/">OAuth 认证</a></h3>
  <p class="excerpt">
    
Lucas Xu


我们开发各种应用和网站是给用户用的， 用户登陆之后就会积攒各种各样的数据。 但是现在的世界被几个用户大户所统治了， 如google， facebook， tencent， 人人等 大平台。用户在不同平台上注册不同账户， 进行不同的登录。小网站或者应用也需要有自己的用户系统。 这给用户带来了极大的麻烦。同时不同用户平台之间共享数据也非常不方便。 记得原来开心网为了进行病毒营销找你要邮箱账户密码的痛苦吗？其实世界不需要这么混乱的。

假如如果有你只需要在一家网站注册，在其他网站都可用， 那怎么样，是不是感觉世界很美好？ 比如现实世界中的身份证， 只需要公安机关给你发一张， 你可以拿着去住宾馆， 也可以那个买菜刀和住院， 是不是方便很多。 这里， 公安机关是一个权威机构， 他出具的文件其他机构都会承认。 如果你的身份证丢了， 去公安机关开个证明，盖个戳也好使。 

网络情况下， 事情变得混乱了，因为没有公安机关。 不过人人也都可以充当公安机关， 你只要在我的系统中注册为我的用户， 我就可以帮你在别的地方认证。 
比如作为google的用户， Google可以帮你告诉Facebook说， 这个人是我的用户， 这是他的信息， 给你。 这样Facebook就可以从Google那里拿到你的信息。 这个过程中间有一些授权问题了。 

首先， google不能在你不知情的情况下把你的信息告诉Facebook， （谁知道私下里会怎么样， 不过表面上还是需要文明一些的）. 所以当Facebook想从google那里知道你的信息的时候， 一种方式是找你要在google那里的用户名和密码， 然后假冒你登陆google的系统，从而得到这些信息。 另外一种方式就是让你写个条子，“我授予Facebook访问我信息的权利”，然后签上你的大名，盖上你的戳，把条子交给Facebook， Facebook拿着这个条子去找Google， 说这是刘文彩同学给我的条子， 你看， 他授权我从你那儿访问他的数据了。 Google验证过签名之后发现是真的， 于是就让facebook把你的信息拿走了。 

在网络世界里，你当然不可能真的去写张条子交给facebook， 那该怎么办呢？
 &nbsp;
    <a href="/2012/06/21/oauth/" class="read-more">read more</a>
  </p>
  <small class="meta">
    21 Jun 2012
    
     | 
    <a href="/tags#java">java</a>
    
  </small>

  <h3 class="excerpt"><a href="/2012/06/18/Understanding-jvm/">Understanding the JVM Advanced Features and Best Practices</a></h3>
  <p class="excerpt">
    
Lucas Xu


读《深入理解Java 虚拟机 - JVM 高级特性与最佳实践》by 周志明

Java 作为技术体系包含多个部分：


Java 语言
Java 虚拟机
JDK, API 等


第一章 走进Java

关于OpenJDK 和JDK的关系请参考: http://en.wikipedia.org/wiki/OpenJDK

自己编译JDK


下载源码 　地址: http://download.java.net/openjdk/jdk7/
准备编译环境
编译

 &nbsp;
    <a href="/2012/06/18/Understanding-jvm/" class="read-more">read more</a>
  </p>
  <small class="meta">
    18 Jun 2012
    
     | 
    <a href="/tags#java">java</a>, 
    
    
    <a href="/tags#jvm">jvm</a>
    
  </small>

  <h3 class="excerpt"><a href="/2012/06/18/Dealing-with-dependencies-in-Android-projects/">Android项目的依赖关系</a></h3>
  <p class="excerpt">
    3月9日下午02:35，2012年 ，来自Xavier Ducrohet 原文：Dealing with dependencies in Android projects by Xavier Ducrohet 翻译： Lucas Xu 在Android SDK Tools和Eclipse ADT 插件的第17版本 (revision 17)中，我们对Android项目的依赖关系管理做了很多改变。 我们所做的第一个改变是调整基于 Ant 的编译系统和 Eclipse ADT 插件，使他们具有相同的行为。 Android 项目包含源代码文件夹，以及对库项目 (android library projects) 和 jar 文件的依赖。 不需要其他多余的设置，只需要在project.properties中添加对于库项目的依赖，Android项目就会在动在 classpath 中添加以下依赖项： libs/*.jar 的内容 库项目(library project)的输出。 库项目的 libs/*.jar 的内容。 这些依赖项，加上项目自身源代码编译的结果，被一起交给DEX工具，然后被转化成字节码从而打包到最终的APK当中。 因为一个项目可能依赖于好几个使用相同的 jar 文件的库项目，Android 编译系统会检查所有所需的 jar 文件，检测出来自不同的库项目的重复 jar 文件，并删除这些重复的jar引用。这会防止可怕的&quot;already added&quot; DX错误。 下面介绍了系统如何发现重复引用。 重要的变化 我们已经改变了库项目生成和打包R类的方式： R类不再被打包到库项目的输出 jar 包中。 库项目不再为其所依赖的库项目生成R类。 只有主应用项目才会在生成本身R类的同时为所依赖的库项目生成R类。 这意味着库项目不能导入(import)另一个库项目的R类。 其实这是没有必要的，因为它们自身的R类包含所有必要的资源。 请注意，应用程序的项目仍然可以导入所引用的库项目的R类，但是重申一遍，其实没有必要这么做， 因为他们本身的R类包括所有的资源。 Eclipse的具体变化 由于不光包含库项目，被称为&quot;Library Projects&quot;的动态class path容器 (dynamic class path container) 已更名为“Android Dependancies”。 现在被库项目引用的纯 Java 项目也可以填充classpath容器。 如果这些Java项目也引用其他 Java 项目或 jar 文件，它们将被自动添加（现在也支持通过 user libraries引用的jar文件）。 重要: 仅当被引用的项被标记为&quot;exported&quot;时这才起作用。 请注意，默认情况下，当一个项目或jar文件被添加到项目的build path 中时是不会被标记为&quot;exported&quot;。 库项目（ 以及它们所引用的lib/*.jar文件）总是会被标记为&quot;exported&quot;。 重要: 如果你还在手动引用jar类库，而不是把他们放在libs目录下， 注意以下几点： 如果该项目是一个... &nbsp;
    <a href="/2012/06/18/Dealing-with-dependencies-in-Android-projects/" class="read-more">read more</a>
  </p>
  <small class="meta">
    18 Jun 2012
    
     | 
    <a href="/tags#android">android</a>, 
    
    
    <a href="/tags#adt">adt</a>, 
    
    
    <a href="/tags#eclipse">eclipse</a>
    
  </small>


<div class="paging">
  

  
    <a href="/" class="newer">Newer Posts</a>
  


  <div class="clear"></div>
</div>

<!-- Google Analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32905076-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

      </div>
    </div>
    <div id="col3">
      <div id="col3_content">
        <h6 class="vlist">GitHub projects</h6>
        <ul class="vlist">
        	<li>
			<a href="https://github.com/xianminx/PullToRefresh-ListView" >PullToRefresh-ListView</a>
		</li>
	</ul>
        <h6 class="vlist">Misc. Links</h6>
        <ul class="vlist">
          <li>
            <a
              href="http://android-developers.blogspot.com/"
              ><img src="http://android-developers.blogspot.kr/favicon.ico"/>Android Developers Blog</a>
          </li>
          <li>
            <a
              href="http://saigeethamn.blogspot.com/"
              ><img src="https://www.blogger.com/img/logo-16.png"/> Sai Geetha's Android blog</a>
          </li>
          </ul>

<!-- AddThis Follow BEGIN -->
<h6 class="vlist">Follow Me</h6>
<br/>
<div class="addthis_toolbox addthis_32x32_style addthis_default_style">
<a class="addthis_button_google_follow" addthis:userid="101226668323584222394"></a>
<a class="addthis_button_facebook_follow" addthis:userid="xianminx"></a>
<a class="addthis_button_linkedin_follow" addthis:userid="xianminx"></a>
<a class="addthis_button_twitter_follow" addthis:userid="xianminx"></a>
</div>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4fdf49b46dac2571"></script>
<!-- AddThis Follow END -->

<br/>

<iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=1&ptype=1&speed=300&skin=1&isTitle=1&noborder=0&isWeibo=1&isFans=1&uid=2063991842&verifier=e0e8dc08&dpc=1"></iframe>


</div>
    </div>
    <div class="clear"></div>
  </div>
  <!-- end: #main -->

  <!-- begin: #footer -->
  <div id="footer">
    <div class="hlist">
      <ul>
        
        <li>
        <a href="/about/"
        
        >About</a>
         | 
        </li>
        
        <li class="active">
        <a href="/"
        
        >Blog</a>
         | 
        </li>
        
        <li>
        <a href="/archives/"
        
        >Archives</a>
         | 
        </li>
        
        <li>
        <a href="/tags/"
        
        >Categories</a>
         | 
        </li>
        
        <li>
        <a href="/other/"
        
        >Other</a>
        
        </li>
        
        <li>&ndash; updated 2012-06-25</li>
      </ul>
    </div>
  </div>
  <!-- end: #footer -->

</div>

</body>
</html>
